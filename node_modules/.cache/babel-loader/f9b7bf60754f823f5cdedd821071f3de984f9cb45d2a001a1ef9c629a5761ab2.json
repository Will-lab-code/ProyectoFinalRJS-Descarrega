{"ast":null,"code":"import _objectSpread from\"C:/Users/wades/OneDrive/Escritorio/2. \\xC1reas/Formaci\\xF3n/Cursos/Coderhouse/React JS/CreaTuLanding1+Descarrega/crea-tu-landing/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useState}from\"react\";import{useCart}from\"../context/CartContext\";import{collection,addDoc,getFirestore,Timestamp}from\"firebase/firestore\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function CheckoutForm(){const{cart,clearCart,totalItems}=useCart();const[form,setForm]=useState({nombre:\"\",telefono:\"\",email:\"\"});const[orderId,setOrderId]=useState(null);const navigate=useNavigate();const handleChange=e=>{setForm(_objectSpread(_objectSpread({},form),{},{[e.target.name]:e.target.value}));};const handleSubmit=async e=>{e.preventDefault();const db=getFirestore();const ordersRef=collection(db,\"orders\");const order={buyer:form,items:cart.map(item=>({id:item.id,nombre:item.nombre,precio:item.precio,cantidad:item.quantity})),total:cart.reduce((acc,item)=>acc+item.precio*item.quantity,0),date:Timestamp.now()};try{const docRef=await addDoc(ordersRef,order);setOrderId(docRef.id);clearCart();}catch(error){console.error(\"Error al generar la orden:\",error);}};if(orderId){return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-4 text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83C\\uDF89 \\xA1Gracias por tu compra!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Tu n\\xFAmero de orden es:\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"text-success\",children:orderId}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary mt-3\",onClick:()=>navigate(\"/\"),children:\"Volver al inicio\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-4\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Finalizar compra\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Nombre\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",name:\"nombre\",required:true,value:form.nombre,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Tel\\xE9fono\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",className:\"form-control\",name:\"telefono\",required:true,value:form.telefono,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",name:\"email\",required:true,value:form.email,onChange:handleChange})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-success\",children:\"Confirmar orden\"})]})]});}export default CheckoutForm;","map":{"version":3,"names":["useState","useCart","collection","addDoc","getFirestore","Timestamp","useNavigate","jsx","_jsx","jsxs","_jsxs","CheckoutForm","cart","clearCart","totalItems","form","setForm","nombre","telefono","email","orderId","setOrderId","navigate","handleChange","e","_objectSpread","target","name","value","handleSubmit","preventDefault","db","ordersRef","order","buyer","items","map","item","id","precio","cantidad","quantity","total","reduce","acc","date","now","docRef","error","console","className","children","onClick","onSubmit","type","required","onChange"],"sources":["C:/Users/wades/OneDrive/Escritorio/2. Áreas/Formación/Cursos/Coderhouse/React JS/CreaTuLanding1+Descarrega/crea-tu-landing/src/components/CheckoutForm.js"],"sourcesContent":["import { useState } from \"react\";\r\nimport { useCart } from \"../context/CartContext\";\r\nimport { collection, addDoc, getFirestore, Timestamp } from \"firebase/firestore\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nfunction CheckoutForm() {\r\n  const { cart, clearCart, totalItems } = useCart();\r\n  const [form, setForm] = useState({ nombre: \"\", telefono: \"\", email: \"\" });\r\n  const [orderId, setOrderId] = useState(null);\r\n  const navigate = useNavigate();\r\n\r\n  const handleChange = (e) => {\r\n    setForm({ ...form, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const db = getFirestore();\r\n    const ordersRef = collection(db, \"orders\");\r\n\r\n    const order = {\r\n      buyer: form,\r\n      items: cart.map(item => ({\r\n        id: item.id,\r\n        nombre: item.nombre,\r\n        precio: item.precio,\r\n        cantidad: item.quantity\r\n      })),\r\n      total: cart.reduce((acc, item) => acc + item.precio * item.quantity, 0),\r\n      date: Timestamp.now()\r\n    };\r\n\r\n    try {\r\n      const docRef = await addDoc(ordersRef, order);\r\n      setOrderId(docRef.id);\r\n      clearCart();\r\n    } catch (error) {\r\n      console.error(\"Error al generar la orden:\", error);\r\n    }\r\n  };\r\n\r\n  if (orderId) {\r\n    return (\r\n      <div className=\"container mt-4 text-center\">\r\n        <h2>🎉 ¡Gracias por tu compra!</h2>\r\n        <p>Tu número de orden es:</p>\r\n        <h4 className=\"text-success\">{orderId}</h4>\r\n        <button className=\"btn btn-primary mt-3\" onClick={() => navigate(\"/\")}>Volver al inicio</button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"container mt-4\">\r\n      <h2>Finalizar compra</h2>\r\n      <form onSubmit={handleSubmit}>\r\n        <div className=\"mb-3\">\r\n          <label className=\"form-label\">Nombre</label>\r\n          <input type=\"text\" className=\"form-control\" name=\"nombre\" required value={form.nombre} onChange={handleChange} />\r\n        </div>\r\n        <div className=\"mb-3\">\r\n          <label className=\"form-label\">Teléfono</label>\r\n          <input type=\"tel\" className=\"form-control\" name=\"telefono\" required value={form.telefono} onChange={handleChange} />\r\n        </div>\r\n        <div className=\"mb-3\">\r\n          <label className=\"form-label\">Email</label>\r\n          <input type=\"email\" className=\"form-control\" name=\"email\" required value={form.email} onChange={handleChange} />\r\n        </div>\r\n        <button type=\"submit\" className=\"btn btn-success\">Confirmar orden</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CheckoutForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}